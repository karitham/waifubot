// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: queries.sql

package userstore

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const consumeTokens = `-- name: ConsumeTokens :one
UPDATE users
SET
  tokens = tokens - $1
WHERE
  user_id = $2
RETURNING
  id, user_id, quote, date, favorite, tokens, anilist_url, discord_username, discord_avatar, last_updated
`

type ConsumeTokensParams struct {
	Tokens int32
	UserID uint64
}

func (q *Queries) ConsumeTokens(ctx context.Context, arg ConsumeTokensParams) (User, error) {
	row := q.db.QueryRow(ctx, consumeTokens, arg.Tokens, arg.UserID)
	var i User
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Quote,
		&i.Date,
		&i.Favorite,
		&i.Tokens,
		&i.AnilistUrl,
		&i.DiscordUsername,
		&i.DiscordAvatar,
		&i.LastUpdated,
	)
	return i, err
}

const create = `-- name: Create :exec
INSERT INTO
  users (user_id)
VALUES
  ($1)
`

func (q *Queries) Create(ctx context.Context, userID uint64) error {
	_, err := q.db.Exec(ctx, create, userID)
	return err
}

const get = `-- name: Get :one
SELECT
  id, user_id, quote, date, favorite, tokens, anilist_url, discord_username, discord_avatar, last_updated
FROM
  users
WHERE
  user_id = $1
`

func (q *Queries) Get(ctx context.Context, userID uint64) (User, error) {
	row := q.db.QueryRow(ctx, get, userID)
	var i User
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Quote,
		&i.Date,
		&i.Favorite,
		&i.Tokens,
		&i.AnilistUrl,
		&i.DiscordUsername,
		&i.DiscordAvatar,
		&i.LastUpdated,
	)
	return i, err
}

const getByAnilist = `-- name: GetByAnilist :one
SELECT
  id, user_id, quote, date, favorite, tokens, anilist_url, discord_username, discord_avatar, last_updated
FROM
  users
WHERE
  LOWER(users.anilist_url) = LOWER($1)
`

func (q *Queries) GetByAnilist(ctx context.Context, lower string) (User, error) {
	row := q.db.QueryRow(ctx, getByAnilist, lower)
	var i User
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Quote,
		&i.Date,
		&i.Favorite,
		&i.Tokens,
		&i.AnilistUrl,
		&i.DiscordUsername,
		&i.DiscordAvatar,
		&i.LastUpdated,
	)
	return i, err
}

const getByDiscordUsername = `-- name: GetByDiscordUsername :one
SELECT
  id, user_id, quote, date, favorite, tokens, anilist_url, discord_username, discord_avatar, last_updated
FROM
  users
WHERE
  discord_username = $1
  AND discord_username != ''
`

func (q *Queries) GetByDiscordUsername(ctx context.Context, discordUsername string) (User, error) {
	row := q.db.QueryRow(ctx, getByDiscordUsername, discordUsername)
	var i User
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Quote,
		&i.Date,
		&i.Favorite,
		&i.Tokens,
		&i.AnilistUrl,
		&i.DiscordUsername,
		&i.DiscordAvatar,
		&i.LastUpdated,
	)
	return i, err
}

const incTokens = `-- name: IncTokens :exec
UPDATE users
SET
  tokens = tokens + 1
WHERE
  user_id = $1
`

func (q *Queries) IncTokens(ctx context.Context, userID uint64) error {
	_, err := q.db.Exec(ctx, incTokens, userID)
	return err
}

const updateAnilistURL = `-- name: UpdateAnilistURL :exec
UPDATE users
SET
  anilist_url = $1
WHERE
  user_id = $2
`

type UpdateAnilistURLParams struct {
	AnilistUrl string
	UserID     uint64
}

func (q *Queries) UpdateAnilistURL(ctx context.Context, arg UpdateAnilistURLParams) error {
	_, err := q.db.Exec(ctx, updateAnilistURL, arg.AnilistUrl, arg.UserID)
	return err
}

const updateDate = `-- name: UpdateDate :exec
UPDATE users
SET
  date = $1
WHERE
  user_id = $2
`

type UpdateDateParams struct {
	Date   pgtype.Timestamp
	UserID uint64
}

func (q *Queries) UpdateDate(ctx context.Context, arg UpdateDateParams) error {
	_, err := q.db.Exec(ctx, updateDate, arg.Date, arg.UserID)
	return err
}

const updateDiscordInfo = `-- name: UpdateDiscordInfo :exec
UPDATE users
SET
  discord_username = $1,
  discord_avatar = $2,
  last_updated = $3
WHERE
  user_id = $4
`

type UpdateDiscordInfoParams struct {
	DiscordUsername string
	DiscordAvatar   string
	LastUpdated     pgtype.Timestamp
	UserID          uint64
}

func (q *Queries) UpdateDiscordInfo(ctx context.Context, arg UpdateDiscordInfoParams) error {
	_, err := q.db.Exec(ctx, updateDiscordInfo,
		arg.DiscordUsername,
		arg.DiscordAvatar,
		arg.LastUpdated,
		arg.UserID,
	)
	return err
}

const updateFavorite = `-- name: UpdateFavorite :exec
UPDATE users
SET
  favorite = $1
WHERE
  user_id = $2
`

type UpdateFavoriteParams struct {
	Favorite pgtype.Int8
	UserID   uint64
}

func (q *Queries) UpdateFavorite(ctx context.Context, arg UpdateFavoriteParams) error {
	_, err := q.db.Exec(ctx, updateFavorite, arg.Favorite, arg.UserID)
	return err
}

const updateQuote = `-- name: UpdateQuote :exec
UPDATE users
SET
  quote = $1
WHERE
  user_id = $2
`

type UpdateQuoteParams struct {
	Quote  string
	UserID uint64
}

func (q *Queries) UpdateQuote(ctx context.Context, arg UpdateQuoteParams) error {
	_, err := q.db.Exec(ctx, updateQuote, arg.Quote, arg.UserID)
	return err
}
